{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>–ü–æ—à—É–∫</title>
  <link rel="stylesheet" href="{% static 'search/search.css' %}">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<main class="srch">
  <header class="srch__bar">
    <form method="get" action="" class="srch__form">
      <input
        type="text"
        class="srch__input"
        name="q"
        value="{{ q }}"
        placeholder="–ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∞–±–æ #—Ö–µ—à—Ç–µ–≥—ñ–≤"
        autocomplete="off"
      >
      <button type="submit" class="srch__btn">–ó–Ω–∞–π—Ç–∏</button>
    </form>
  </header>

  <section class="srch__panel">
    {% if q %}
      {% if exact_user %}
        <div class="srch__section">
          <a class="usercard" href="{% url 'profile_public' exact_user.username %}">
            {% if exact_user.avatar %}
              <img class="usercard__avatar" src="{{ exact_user.avatar.url }}" alt="@{{ exact_user.username }}">
            {% else %}
              <div class="usercard__avatar usercard__avatar--placeholder">üë§</div>
            {% endif %}
            <div class="usercard__meta">
              <div class="usercard__username">@{{ exact_user.username }}</div>
              {% if exact_user.first_name or exact_user.last_name %}
                <div class="usercard__name">{{ exact_user.first_name }} {{ exact_user.last_name }}</div>
              {% endif %}
              {% if exact_user.bio %}
                <div class="usercard__bio">{{ exact_user.bio }}</div>
              {% endif %}
            </div>
          </a>
        </div>
      {% endif %}

      <div class="srch__section">
        <div class="srch__section-title">
          {% if exact_user %}–ú–æ–∂–ª–∏–≤–æ, –≤–∏ —à—É–∫–∞–ª–∏ —Ç–∞–∫–æ–∂{% else %}–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑–∞ –∑–∞–ø–∏—Ç–æ–º{% endif %}
        </div>

        {% if suggestions %}
          <ul class="list">
            {% for u in suggestions %}
              <li>
                <a class="usercard" href="{% url 'profile_public' u.username %}">
                  {% if u.avatar %}
                    <img class="usercard__avatar" src="{{ u.avatar.url }}" alt="@{{ u.username }}">
                  {% else %}
                    <div class="usercard__avatar usercard__avatar--placeholder">üë§</div>
                  {% endif %}
                  <div class="usercard__meta">
                    <div class="usercard__username">@{{ u.username }}</div>
                    {% if u.first_name or u.last_name %}
                      <div class="usercard__name">{{ u.first_name }} {{ u.last_name }}</div>
                    {% endif %}
                    {% if u.bio %}
                      <div class="usercard__bio">{{ u.bio }}</div>
                    {% endif %}
                  </div>
                </a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

      {% if hashtag_query %}
        <div class="srch__section">
          <div class="srch__section-title">–ü–æ—Å—Ç–∏ –∑ —Ö–µ—à—Ç–µ–≥–æ–º {{ hashtag_query }}</div>

          {% if hashtag_posts %}
            <ul class="list">
              {% for p in hashtag_posts %}
                <li>
                  <div class="postcard">
                    <div class="postcard__meta">
                      <a class="usercard usercard--inline" href="{% url 'profile_public' p.author.username %}">
                        {% if p.author.avatar %}
                          <img class="usercard__avatar" src="{{ p.author.avatar.url }}" alt="@{{ p.author.username }}">
                        {% else %}
                          <div class="usercard__avatar usercard__avatar--placeholder">üë§</div>
                        {% endif %}
                        <div class="usercard__meta">
                          <div class="usercard__username">@{{ p.author.username }}</div>
                        </div>
                      </a>
                      <span class="postcard__date">{{ p.created_at|date:"Y-m-d H:i" }}</span>
                    </div>

                    {% if p.image %}
                      <div class="postcard__image">
                        <img src="{{ p.image.url }}" alt="post image">
                      </div>
                    {% endif %}

                    {% if p.caption %}
                      <div class="postcard__caption">
                        {{ p.caption|truncatechars:160 }}
                      </div>
                    {% endif %}
                  </div>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <div class="srch__empty">–ü–æ—Å—Ç–∏ –∑ {{ hashtag_query }} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>
          {% endif %}
        </div>
      {% endif %}

      {% if not exact_user and not suggestions and not hashtag_posts %}
        <div class="srch__empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>
      {% endif %}
    {% else %}
      <div class="srch__hint">–í–≤–µ–¥—ñ—Ç—å @–Ω—ñ–∫, —ñ–º‚Äô—è/–ø—Ä—ñ–∑–≤–∏—â–µ –∞–±–æ #—Ö–µ—à—Ç–µ–≥.</div>
    {% endif %}
  </section>
</main>
</body>
</html>




